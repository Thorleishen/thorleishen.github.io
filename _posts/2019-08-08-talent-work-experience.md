---
layout: post
title: 'arachni ç¯å¢ƒæ­å»ºé—®é¢˜'
categories: arachni
tags: arachni ruby linux work
author: thorleishen
---

* content
{:toc}
## å‰è¨€

å·¥ä½œä¹‹é™…é‡åˆ°çš„arachniç¯å¢ƒæ­é…çš„å‘



## é—®é¢˜ä¸€

linuxå®‰è£…sqlite3é—®é¢˜ï¼Œå°†ä¸€å°å·²ç»å®‰è£…å¥½çš„sqlite3ç§»æ¤åˆ°å¦ä¸€å°æœºå™¨ä¸Šï¼Œåªéœ€è¦å°†/usr/binç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶sqlite3ç§»åˆ°å¦ä¸€å°æœºå™¨ä¸Šçš„/usr/binç›®å½•ä¸‹å°±å¯ä»¥ï¼ˆæœ‰äº›æœºå™¨çš„å¯æ‰§è¡Œsqlite3æ–‡ä»¶åœ¨/usr/local/binç›®å½•ä¸‹ï¼‰ï¼Œå¹¶ä½¿ç”¨rubyè¿æ¥sqlite3æ•°æ®åº“æ—¶ï¼ŒæŠ¥é”™æ‰¾ä¸åˆ°libsqlite3.so.0æ–‡ä»¶

è§£å†³åŠæ³•å¦‚ä¸‹ï¼š

```linux
# é€šè¿‡findå‘½ä»¤æŸ¥æ‰¾å·²ç»å®‰è£…çš„linuxæœºå™¨ä¸Šlibsqlite3.so.0
find / -name libsqlite3.so.0
# å°†ä¸Šé¢æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶ç§»æ¤åˆ°å¦ä¸€å°æœºå™¨ä¸Šï¼Œæ³¨ï¼šlibsqlite3.so.0æ–‡ä»¶æ˜¯libsqlite3.so.0.8.8è½¯é“¾æ¥æ–‡ä»¶
```

å†æ¬¡æ‰§è¡Œè¿æ¥æ•°æ®åº“çš„æ“ä½œæ—¶ï¼ŒæŠ¥é”™ï¼Œè¿˜æ˜¯æ‰¾ä¸åˆ°libsqlite.3.so.0æ–‡ä»¶

```linux
# ä½¿ç”¨ldd &{dir}/libsqlite3.so.0ï¼Œdirå³æŠ¥é”™çš„è·¯å¾„ï¼Œå¹¶åœ¨å®‰è£…å¥½çš„æœºå™¨æ‰§è¡ŒåŒæ ·çš„å‘½ä»¤ï¼Œæ¯”è¾ƒä¸¤è€…ä¹‹é—´åŒºåˆ«
# æœ€åä¼šå‘ç°libsqlite3.so.0æ–‡ä»¶çš„æŒ‡å‘è·¯å¾„ï¼Œå¹¶å¯¹æ¯”ä¸¤ä¸ªæœºå™¨çš„æºæ–‡ä»¶ä¹‹é—´çš„å·®åˆ«
# é€šè¿‡ä¿®æ”¹è½¯è¿æ¥æŒ‡å‘çš„æ–‡ä»¶ï¼ˆå³æŒ‡å‘ç›¸åŒçš„æ–‡ä»¶ï¼‰
ln -s /usr/lib/aarxxxx...xxx/libsqlite3.so.0.8.8 /usr/lib/libsqlite3.so.0 # å®é™…ä»¥è‡ªå·±å®‰è£…çš„è·¯å¾„ä¸ºä¸»
```

å†æ¬¡æ‰§è¡Œå°±OKäº†ğŸ˜



## é—®é¢˜äºŒ

rubyå®‰è£…ç¯å¢ƒé—®é¢˜ï¼Œé€šè¿‡å°†ruby.tar.gzåŒ…è§£å‹åˆ°æ ¹ç›®å½•

```linux
# è§£å‹rubyåŒ…åˆ°æ ¹ç›®å½•å‘½ä»¤
tar -zvxf rubyxxx.tar.gz -C /
```

æ‰§è¡Œruby -vï¼Œçœ‹åˆ°rubyç›¸åº”çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä½†æ‰§è¡Œgem listæ—¶ï¼ŒæŠ¥é”™ï¼šæ‰¾ä¸åˆ°libruby.so.0æ–‡ä»¶

```linux
# é€šè¿‡å°†/usr/libè·¯å¾„ä¸‹çš„libruby.so.0æ–‡ä»¶ç§»åˆ°/usr/lib/binç›®å½•ä¸‹
cp /usr/lib/libruby.so* /usr/lib/bin
```

å†æ¬¡æ‰§è¡Œgem listï¼Œå‡ºç°å®‰è£…çš„ä¾èµ–åŒ…è¯´æ˜é—®é¢˜å·²ç»è§£å†³

![](D:\Downloads\4bb43ae1272f7aa1b04e905196ebe33a.jpg)

## å­¦ä¹ 

- è¯¯åˆ /usr/lib/araxxx/libm.so.0æ–‡ä»¶ï¼Œå¯¼è‡´ç³»ç»Ÿæœ‰äº›å‘½ä»¤ä¸èƒ½ä½¿ç”¨ï¼ŒæŠ¥é”™ï¼šæ‰¾ä¸åˆ°libm.so.0ï¼Œåœ¨ä¸æ¸…æ¥šæ–‡ä»¶æœ‰ä»€ä¹ˆä½œç”¨çš„æ—¶å€™ï¼Œåº”è¯¥é€‰æ‹©å¤‡ä»½ä¸€ä»½ï¼Œå…»æˆè‰¯å¥½çš„ä¹ æƒ¯
- sqlite3ç¦»çº¿å®‰è£…

```linux
# è§£å‹ç¦»çº¿å®‰è£…æ–‡ä»¶sqlite3-xxx.tar.gz
tar -zvxf sqlite3-xxx.tar.gz  // tar -zvxf sqlite3-xxx.tar.gz /opt
# è¿›å…¥åˆ°sqlite3-xxxæ–‡ä»¶
cd sqlite3-xxx
# é€‰æ‹©å®‰è£…è·¯å¾„ï¼Œå¹¶ç¼–è¯‘å®‰è£…
./configure --prefix=/opt/sqlite
make
make install
```



## è‡ªæˆ‘è®¤è¯†

æ­å»ºç¯å¢ƒï¼Œçœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯ç”±äºä¸åŒçš„ç³»ç»Ÿä¾èµ–çš„ç¯å¢ƒä¸ä¸€æ ·ï¼Œå¯¼è‡´å¾ˆå¤šé…ç½®æ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼Œä¹Ÿè¯´æ˜è‡ªå·±çŸ¥è¯†çš„åŒ®ä¹ï¼Œå¯¹linuxå‘½ä»¤è¿˜ä¸å¤Ÿç†Ÿæ‚‰ï¼Œå¹¶ä¸”å¯¹rubyçš„ç¯å¢ƒä¸å¤Ÿç†Ÿæ‚‰ï¼›ä¹Ÿè¯´æ˜è‡ªå·±çš„è¿›æ­¥ç©ºé—´å¾ˆå¤§ï¼ŒåŠ æ²¹ï¼ï¼ï¼

